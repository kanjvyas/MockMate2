<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MockMate - AI Interview Coach</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4cc9f0;
            --secondary: #3f37c9;
            --dark: #212529;
            --light: #f8f9fa;
            --gray: #6c757d;
            --success: #4ad66d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 2rem;
            color: var(--dark);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem 2rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .interview-container {
            padding: 2rem;
        }

        .welcome-screen {
            text-align: center;
            padding: 2rem;
        }

        .welcome-screen h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .welcome-screen p {
            color: var(--gray);
            margin-bottom: 2rem;
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .chat-container {
            display: none;
            flex-direction: column;
            height: 500px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 1rem 1.5rem;
            border-radius: 1.5rem;
            animation: fadeIn 0.3s ease;
            line-height: 1.5;
            font-size: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .coach-message {
            align-self: flex-start;
            background-color: #f1f3f5;
            border-bottom-left-radius: 0.5rem;
            color: var(--dark);
        }

        .user-message {
            align-self: flex-end;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border-bottom-right-radius: 0.5rem;
        }

        .input-area {
            padding: 1.5rem;
            border-top: 1px solid #eee;
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        textarea {
            flex: 1;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 0.8rem;
            resize: none;
            min-height: 80px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 0.8rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        button:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .progress-container {
            padding: 0 2rem;
        }

        .progress-bar {
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--primary-light), var(--primary));
            width: 0%;
            transition: width 0.5s ease;
        }

        .feedback-section {
            display: none;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 0.8rem;
            margin-top: 1rem;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .metric {
            text-align: center;
            padding: 1.2rem;
            background-color: white;
            border-radius: 0.8rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.3rem;
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .tips {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.8rem;
            margin-top: 1rem;
        }

        .tips h4 {
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .tips ul {
            padding-left: 1.5rem;
            color: var(--gray);
            line-height: 1.8;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn-secondary {
            background-color: var(--gray);
        }

        .start-btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            border-radius: 2rem;
            margin-top: 1rem;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .container {
                border-radius: 0.8rem;
            }
            
            .metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ¤– MockMate</h1>
            <p>AI Interview Coach for Students</p>
        </header>
        
        <div class="interview-container">
            <div class="welcome-screen" id="welcomeScreen">
                <h2>Practice Your Interview Skills</h2>
                <p>MockMate simulates real job interviews and provides instant feedback to help you improve your interview skills anytime, anywhere.</p>
                <button class="start-btn" id="startBtn">Start Practice Interview</button>
            </div>
            
            <div class="chat-container" id="chatContainer">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progressBar"></div>
                    </div>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will appear here -->
                </div>
                
                <div class="input-area">
                    <textarea id="userInput" placeholder="Type your answer here..."></textarea>
                    <button id="sendBtn">Send</button>
                </div>
            </div>
            
            <div class="feedback-section" id="feedbackSection">
                <h3>Feedback on Your Answer</h3>
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-value" id="confidenceScore">7.2</div>
                        <div class="metric-label">Confidence</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="clarityScore">6.8</div>
                        <div class="metric-label">Clarity</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="structureScore">8.1</div>
                        <div class="metric-label">Structure</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="relevanceScore">7.5</div>
                        <div class="metric-label">Relevance</div>
                    </div>
                </div>
                
                <div class="tips">
                    <h4>Improvement Tips:</h4>
                    <ul id="tipsList">
                        <li>Be more specific with your examples</li>
                        <li>Quantify achievements where possible</li>
                        <li>Connect your answer to the job requirements</li>
                    </ul>
                </div>
                
                <div class="btn-group">
                    <button id="nextQuestionBtn">Next Question</button>
                    <button class="btn-secondary" id="tryAgainBtn">Try Again</button>
                </div>
            </div>
        </div>
    </div>
    
   <script>
    const welcomeScreen = document.getElementById('welcomeScreen');
    const chatContainer = document.getElementById('chatContainer');
    const chatMessages = document.getElementById('chatMessages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const startBtn = document.getElementById('startBtn');
    const feedbackSection = document.getElementById('feedbackSection');
    const nextQuestionBtn = document.getElementById('nextQuestionBtn');
    const tryAgainBtn = document.getElementById('tryAgainBtn');
    const progressBar = document.getElementById('progressBar');

    const questions = [
        "Tell me about yourself",
        "What are your greatest strengths?",
        "What is your biggest weakness?",
        "Why do you want this position?",
        "Where do you see yourself in 5 years?"
    ];

    const feedbackTips = [
        "Good start! Try to be more specific with your examples",
        "Nice answer! Consider connecting this to the job requirements",
        "Good self-awareness. Now suggest how you're improving in this area",
        "Great enthusiasm! Add what specifically excites you about this role",
        "Good vision. Relate this back to how the company can help you grow"
    ];

    let currentQuestionIndex = 0;

    startBtn.addEventListener('click', () => {
        welcomeScreen.style.display = 'none';
        chatContainer.style.display = 'flex';
        displayQuestion();
    });

    function displayQuestion() {
        const question = questions[currentQuestionIndex];
        addMessage(`ðŸ¤– Coach: ${question}`, 'coach-message');

        setTimeout(() => {
            addMessage(`ðŸ’¡ Hint: ${feedbackTips[currentQuestionIndex]}`, 'coach-message');
        }, 1000);

        updateProgress();
    }

    sendBtn.addEventListener('click', sendResponse);
    userInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendResponse();
        }
    });

    function sendResponse() {
        const response = userInput.value.trim();
        if (!response) return;

        addMessage(`You: ${response}`, 'user-message');
        userInput.value = '';

        // Call backend with the answer
        showFeedback(response);
    }

    function showFeedback(userAnswer) {
       fetch('http://10.38.166.218:5000/analyze', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ answer: userAnswer })
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('confidenceScore').textContent = data.confidence;
            document.getElementById('clarityScore').textContent = data.clarity;
            document.getElementById('structureScore').textContent = data.structure;
            document.getElementById('relevanceScore').textContent = data.relevance;

            const tipsList = document.getElementById('tipsList');
            tipsList.innerHTML = '';
            data.tips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                tipsList.appendChild(li);
            });

            feedbackSection.style.display = 'block';
            feedbackSection.scrollIntoView({ behavior: 'smooth' });
        })
        .catch(err => {
            console.error('Error getting feedback:', err);
            alert("Could not connect to backend. Make sure it's running.");
        });
    }

    nextQuestionBtn.addEventListener('click', () => {
        feedbackSection.style.display = 'none';
        currentQuestionIndex++;

        if (currentQuestionIndex < questions.length) {
            displayQuestion();
        } else {
            addMessage("ðŸ¤– Coach: Great job! You've completed the practice interview.", 'coach-message');
            feedbackSection.style.display = 'none';
            document.querySelector('.input-area').style.display = 'none';
        }
    });

    tryAgainBtn.addEventListener('click', () => {
        feedbackSection.style.display = 'none';
        addMessage(`ðŸ¤– Coach: Let's try that again: ${questions[currentQuestionIndex]}`, 'coach-message');
    });

    function updateProgress() {
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;
    }

    function addMessage(text, className) {
        const messageElement = document.createElement('div');
        messageElement.classList.add('message', className);
        messageElement.innerHTML = text;
        chatMessages.appendChild(messageElement);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
</script>

</body>
</html>